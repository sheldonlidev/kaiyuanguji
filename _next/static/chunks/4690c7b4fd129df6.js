(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},40867,e=>{"use strict";var t,r=e.i(18050),a=e.i(71645),s=((t={}).WORK="work",t.COLLECTION="collection",t.BOOK="book",t);let l=null;async function n(e,t){let r=await fetch(e,{cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch from ${e}: ${r.statusText}`);let a=await r.json(),l=[];return a.books&&Object.values(a.books).forEach(e=>{l.push({id:e.id,name:e.title,type:s.BOOK,isDraft:t,rawPath:e.path,author:e.author,collection:e.collection,year:e.year,holder:e.holder})}),a.collections&&Object.values(a.collections).forEach(e=>{l.push({id:e.id,name:e.title,type:s.COLLECTION,isDraft:t,rawPath:e.path,author:e.author,year:e.year})}),a.works&&Object.values(a.works).forEach(e=>{l.push({id:e.id,name:e.title,type:s.WORK,isDraft:t,rawPath:e.path,author:e.author,year:e.year})}),l}async function i(){if(l)return l;let e=[];try{let t=await n("https://raw.githubusercontent.com/open-guji/book-index-draft/main/index.json",!0);e.push(...t)}catch(e){console.warn("Failed to fetch draft index:",e)}try{let t=await n("https://raw.githubusercontent.com/open-guji/book-index/main/index.json",!1);e.push(...t)}catch(e){console.warn("Official index not available (this is expected if it hasn't been initialized):",e)}let t=new Map;e.forEach(e=>{t.set(e.id,e)});let r=Array.from(t.values());return l=r,r}var o=e.i(22016);function c({book:e}){return(0,r.jsx)(o.default,{href:`/book-index/${e.id}`,className:"block p-4 bg-white border border-border rounded-lg hover:border-vermilion hover:shadow-md transition-all",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,r.jsx)("span",{className:"text-2xl flex-shrink-0 mt-0.5",children:(()=>{switch(e.type){case s.WORK:return"ðŸ“–";case s.COLLECTION:return"ðŸ“š";case s.BOOK:return"ðŸ“•";default:return"ðŸ“„"}})()}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-ink mb-2 break-words",children:e.name}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-secondary",children:[(0,r.jsxs)("code",{className:"px-2 py-0.5 bg-paper rounded text-xs font-mono",children:["ID: ",e.id]}),e.author&&(0,r.jsxs)("span",{className:"text-xs",children:["ä½œè€…: ",e.author]}),e.year&&(0,r.jsx)("span",{className:"text-xs",children:e.year})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 items-end flex-shrink-0",children:[(0,r.jsx)("span",{className:`
              px-2 py-1 text-xs font-medium rounded border
              ${(()=>{switch(e.type){case s.WORK:return"text-blue-600 bg-blue-50 border-blue-200";case s.COLLECTION:return"text-purple-600 bg-purple-50 border-purple-200";case s.BOOK:return"text-vermilion bg-vermilion/5 border-vermilion/20";default:return"text-secondary bg-paper border-border"}})()}
            `,children:function(e){switch(e){case s.WORK:return"ä½œå“";case s.COLLECTION:return"ä¸›ç¼–";case s.BOOK:return"ä¹¦";default:return""}}(e.type)}),(0,r.jsx)("span",{className:`
              px-2 py-1 text-xs font-medium rounded
              ${e.isDraft?"text-orange-600 bg-orange-50":"text-green-600 bg-green-50"}
            `,children:e.isDraft?"è‰ç¨¿":"æ­£å¼"})]})]})})}let d=[{label:"å…¨éƒ¨",value:"all"},{label:"ä½œå“",value:s.WORK},{label:"ä¸›ç¼–",value:s.COLLECTION},{label:"ä¹¦",value:s.BOOK}];function x(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[n,o]=(0,a.useState)(""),[x,u]=(0,a.useState)("all"),[h,m]=(0,a.useState)(!0),[b,p]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{m(!0),p(null);let e=await i();t(e),l(e)}catch(e){p(e instanceof Error?e.message:"åŠ è½½å¤±è´¥")}finally{m(!1)}})()},[]),(0,a.useEffect)(()=>{let t=e;if("all"!==x&&(t=t.filter(e=>e.type===x)),n.trim()){let e=n.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.id.toLowerCase().includes(e))}l(t)},[n,x,e]),h)?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20","aria-live":"polite",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-vermilion mb-4"}),(0,r.jsx)("p",{className:"text-secondary",children:"æ­£åœ¨åŠ è½½å¤ç±åˆ—è¡¨..."})]}):b?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20","aria-live":"assertive",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"âš ï¸"}),(0,r.jsxs)("p",{className:"text-secondary mb-4",children:["åŠ è½½å¤±è´¥: ",b]}),(0,r.jsx)("button",{onClick:()=>{m(!0),p(null),i().then(e=>{t(e)}).catch(e=>{p(e instanceof Error?e.message:"åŠ è½½å¤±è´¥")}).finally(()=>{m(!1)})},className:"px-6 py-2 bg-vermilion text-white rounded-lg hover:bg-vermilion/90",children:"é‡è¯•"})]}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-ink mb-3 tracking-wide",children:"å¤ç±ç´¢å¼•"}),(0,r.jsx)("p",{className:"text-secondary text-base md:text-lg",children:"æ ‡å‡†åŒ–çš„å¤ç±æ•°å­—èµ„æºç´¢å¼•ç³»ç»Ÿ"})]}),(0,r.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"æœç´¢å¤ç±åç§°æˆ– ID...","aria-label":"æœç´¢å¤ç±åç§°æˆ– ID",className:"w-full px-4 py-3 pr-10 border border-border rounded-lg focus:outline-none focus:border-vermilion focus:ring-2 focus:ring-vermilion/20 bg-white text-ink transition-all"}),n&&(0,r.jsx)("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-secondary hover:text-ink transition-colors","aria-label":"æ¸…é™¤æœç´¢",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,r.jsx)("button",{onClick:()=>u(e.value),className:`
                px-4 py-1.5 rounded-full text-sm font-medium transition-all duration-200
                ${x===e.value?"bg-vermilion text-white shadow-sm":"bg-paper text-secondary border border-border hover:border-vermilion/50 hover:text-vermilion"}
              `,children:e.label},e.value))})]}),(0,r.jsx)("div",{className:"flex items-center justify-between mb-4 text-sm text-secondary",children:(0,r.jsxs)("span",{children:[n||"all"!==x?"ç­›é€‰ç»“æžœ":"æœ€è¿‘æ”¶å½•",": ",s.length," æ¡è®°å½•"]})}),0===s.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 bg-paper/30 rounded-2xl border border-dashed border-border",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ”"}),(0,r.jsx)("p",{className:"text-secondary",children:n||"all"!==x?"æœªæ‰¾åˆ°åŒ¹é…çš„å¤ç±":"æš‚æ— æ”¶å½•å¤ç±"}),(n||"all"!==x)&&(0,r.jsx)("button",{onClick:()=>{o(""),u("all")},className:"mt-4 text-vermilion hover:underline text-sm font-medium",children:"æ¸…é™¤æ‰€æœ‰ç­›é€‰æ¡ä»¶"})]}):(0,r.jsx)("div",{className:"grid gap-4",children:s.map(e=>(0,r.jsx)(c,{book:e},e.id))})]})}e.s(["default",()=>x],40867)}]);