(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return o}});let o=e=>{}},85130,89271,e=>{"use strict";var t,r=((t={}).WORK="work",t.COLLECTION="collection",t.BOOK="book",t);e.s(["BookResourceType",()=>r],89271);var o=e.i(85149);let a={};async function n(e,t){try{let o=await fetch(e,{cache:"no-store",signal:AbortSignal.timeout(5e3)});if(!o.ok)throw Error(`Failed to fetch from ${e}: ${o.statusText}`);let a=await o.json(),n=[],i=(e,r)=>{e&&Object.values(e).forEach(e=>{n.push({id:e.id,name:e.title||e.name,type:r,isDraft:t,rawPath:e.path,author:e.author,collection:e.collection,year:e.year,holder:e.holder})})};return i(a.books,r.BOOK),i(a.collections,r.COLLECTION),i(a.works,r.WORK),n}catch(e){throw e}}async function i(e="github"){if(a[e])return a[e];let t=[],r=async t=>{if("github"===e)return n(t?o.GITHUB_BOOK_INDEX_DRAFT:o.GITHUB_BOOK_INDEX,t);let r=t?"book-index-draft":"book-index",a="main",i=`${o.JSDELIVR_FASTLY}/${o.GITHUB_ORG}/${r}@${a}/index.json`,s=`${o.JSDELIVR_CDN}/${o.GITHUB_ORG}/${r}@${a}/index.json`;try{return await n(i,t)}catch(e){return console.warn("Fastly index fetch failed, trying fallback:",e),await n(s,t)}};try{let e=await r(!0);t.push(...e)}catch(t){console.warn(`Failed to fetch draft index from ${e}:`,t)}try{let e=await r(!1);t.push(...e)}catch(t){console.warn(`Failed to fetch official index from ${e}:`,t)}let s=new Map;t.forEach(e=>{s.set(e.id,e)});let l=Array.from(s.values());return a[e]=l,l}async function s(e,t="github"){return(await i(t)).find(t=>t.id===e)||null}async function l(e,t="github"){if("github"===t){let r=e.isDraft?`${o.GITHUB_BASE}/${o.GITHUB_ORG}/book-index-draft/main`:`${o.GITHUB_BASE}/${o.GITHUB_ORG}/book-index/main`,a=`${r}/${e.rawPath}`,n=await fetch(a,{cache:"no-store",signal:AbortSignal.timeout(1e4)});if(!n.ok)throw Error(`Failed to fetch book detail from ${t}: ${n.statusText}`);return n.json()}let r=e.isDraft?"book-index-draft":"book-index",a="main",n=`${o.JSDELIVR_FASTLY}/${o.GITHUB_ORG}/${r}@${a}/${e.rawPath}`,i=`${o.JSDELIVR_CDN}/${o.GITHUB_ORG}/${r}@${a}/${e.rawPath}`;try{let e=await fetch(n,{cache:"no-store",signal:AbortSignal.timeout(8e3)});if(!e.ok)throw Error(`Fastly status: ${e.status}`);return await e.json()}catch(t){console.warn("Fastly fetch failed, trying fallback CDN:",t);let e=await fetch(i,{cache:"no-store",signal:AbortSignal.timeout(1e4)});if(!e.ok)throw Error(`Failed to fetch book detail from CDN: ${e.statusText}`);return await e.json()}}function c(e){switch(e){case r.WORK:return"作品";case r.COLLECTION:return"丛编";case r.BOOK:return"书";default:return""}}function u(e){return e?"草稿":"正式"}e.s(["fetchAllBooks",()=>i,"fetchBookDetail",()=>l,"findBookById",()=>s,"getStatusLabel",()=>u,"getTypeLabel",()=>c],85130)},81827,e=>{"use strict";var t=e.i(18050),r=e.i(71645),o=e.i(22016),a=e.i(85130),n=e.i(67920),i=e.i(89271);function s({id:e,children:s,className:l,...c}){let{source:u}=(0,n.useSource)(),[d,h]=(0,r.useState)(null),[f,k]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=!0;return(async()=>{try{let r=await (0,a.findBookById)(e,u);t&&r&&(h(r.type),k(r.name))}catch(t){console.error(`Failed to fetch book info for ID: ${e}`,t)}})(),()=>{t=!1}},[e,u]),(0,t.jsxs)(o.default,{href:`/book-index/${e}`,className:`inline-flex items-center text-vermilion hover:underline font-medium decoration-dotted underline-offset-4 ${l||""}`,...c,children:[(()=>{let e="w-3.5 h-3.5 inline-block mr-1 opacity-70 align-middle";switch(d){case i.BookResourceType.BOOK:return(0,t.jsx)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})});case i.BookResourceType.COLLECTION:return(0,t.jsx)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})});case i.BookResourceType.WORK:return(0,t.jsx)("svg",{className:e,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2.5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})});default:return null}})(),(0,t.jsx)("span",{children:f||s||e})]})}e.s(["default",()=>s])}]);