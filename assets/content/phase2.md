---
title: 第二阶段：完整校对工具集
author: 开源古籍团队
tags: [校对, 协作, 工具]
---

# 第二阶段：完整校对工具集

> 建立"图文对照"的高性能校对环境，确保数字化质量

---

## 核心目标

解决数字化过程中"最后一公里"的准确性问题，提供专业、高效的古籍校对工具，让校对工作从繁琐变得轻松。

---

## 核心组件

### 1. 图文联动对比器 (Split-view Annotator)

这是校对工具的核心功能，实现扫描原件与 OCR 文本的精准对应。

#### 主要特性

**🔄 同步滚动**
- 点击文本，图片自动定位到对应位置
- 滚动图片，文本自动高亮对应区域
- 基于坐标映射算法，实现毫秒级响应

**📍 精准定位**
- 字符级别的坐标映射
- 支持扫描件切片管理
- 自动识别版心、边栏区域

**✏️ 实时标注**
- 直接在图片上标记错误位置
- 支持矩形、圆形、箭头等标注工具
- 标注信息自动关联到文本

#### 技术实现

```dart
SplitViewProofreader(
  imageSource: ScanImage('path/to/scan.jpg'),
  textSource: OCRText.fromFile('text.txt'),
  onTextClick: (position) {
    // 点击文本，定位图片
    imageController.scrollTo(position);
  },
  onImageScroll: (position) {
    // 滚动图片，高亮文本
    textController.highlight(position);
  },
)
```

---

### 2. 古籍专用输入组件

为了提高校对效率，我们开发了一系列专门的输入辅助工具。

#### 🔤 异体字转换器

古籍中大量使用异体字、通假字，人工查找费时费力。

**功能特点**
- 集成常用异体字映射库（5000+ 字对）
- 智能识别并提示可替换字符
- 支持批量替换和逐个确认
- 自定义字典，适应不同版本

**使用示例**
```
原文: 衆生
建议: 众生
一键替换 / 忽略 / 添加到词典
```

#### ⌨️ 快捷标点栏

古籍断句是校对的重要环节。

**功能特点**
- 虚拟按键：常用标点符号一键输入
- 快捷键支持：Ctrl+1 插入句号，Ctrl+2 插入逗号
- 符号预览：显示各种古籍专用符号
- 自定义布局：根据个人习惯调整

**符号库**
```
。，、；：？！「」『』（）〔〕【】……
```

---

### 3. 协作与质量控制

#### 📝 多人协作校对工作流

基于 Git 的版本控制理念，我们设计了严谨的校对流程：

**角色分工**
- **一校**: 初步核对，标记疑难字词
- **二校**: 仔细核验，确认一校标记
- **终审**: 最终审定，保证质量

**工作流程**
```
原始 OCR 文本
    ↓
一校 (Branch: proofread-1)
    ↓
二校 (Branch: proofread-2)
    ↓
终审 (Merge to main)
    ↓
发布版本
```

#### 🔍 版本控制 (Git-based)

**核心优势**
- 记录每一处修改，可追溯历史
- 支持差异比对（Diff）
- 冲突解决机制
- 分支合并与审核

**差异比对示例**
```diff
- 道可道，非恆道。
+ 道可道，非常道。
  名可名，非常名。
```

#### 📊 错误热力图

统计分析常见错误类型，为 AI 训练积累样本数据。

**分析维度**
- 高频错字统计
- 标点使用准确率
- 异体字分布
- 校对耗时分析

**可视化呈现**
```
形近字误认: ████████░░ 45%
OCR 识别错误: ███████░░░ 38%
标点位置错误: ████░░░░░░ 22%
```

---

## 技术架构

### 前端界面

```
┌─────────────────────────────────────┐
│          顶部工具栏                  │
│  [保存] [撤销] [重做] [标注] [设置]  │
├──────────────┬──────────────────────┤
│              │                      │
│  扫描图片    │    OCR 文本编辑区    │
│  (可缩放)    │    (可编辑)          │
│              │                      │
│  [图片控制]  │    [文本工具栏]      │
│              │                      │
├──────────────┴──────────────────────┤
│          底部状态栏                  │
│  进度: 45% | 字数: 1250 | 错误: 3  │
└─────────────────────────────────────┘
```

### 数据存储

```json
{
  "book_id": "daodejing_songban",
  "pages": [
    {
      "page_num": 1,
      "image": "scans/page_001.jpg",
      "text": "道可道，非常道。名可名，非常名。",
      "annotations": [
        {
          "type": "correction",
          "position": { "x": 120, "y": 340 },
          "original": "恆",
          "corrected": "常"
        }
      ],
      "status": "reviewed",
      "reviewer": "user_001"
    }
  ]
}
```

---

## 当前进展

✅ **已完成**
- 双栏布局原型设计
- 基础文本编辑功能
- 异体字词典整理（1000+ 条目）

🔨 **进行中**
- 图文坐标映射算法优化
- 异体字转换器集成
- 版本控制系统对接

📋 **待开发**
- 多人协作功能
- 错误热力图分析
- 移动端适配

---

## 使用指南

### 快速开始

1. **导入扫描件和文本**
   - 支持格式：JPG, PNG, PDF
   - 文本格式：TXT, Markdown

2. **开始校对**
   - 左侧查看原始扫描件
   - 右侧编辑 OCR 识别文本
   - 点击文本，自动定位图片位置

3. **使用辅助工具**
   - 异体字检测：自动标记可替换字符
   - 快捷标点：鼠标或键盘快速输入
   - 批注功能：添加校对说明

4. **提交审核**
   - 保存修改
   - 标记为"已校对"
   - 提交给下一级审核

---

## 参考项目

- [维基文库校对工具](https://wikisource.org)
- [识典古籍平台](https://www.shidian.org.cn/)
- [中国哲学书电子化计划](https://ctext.org)

---

[← 上一阶段：排版支持](/read/phase1) | [下一阶段：AI OCR →](/read/phase3)
